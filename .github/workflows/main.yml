name: Selenium Test Workflow
'on':
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
jobs:
  run-selenium-tests:
    runs-on: ubuntu-latest
    services:
      selenium:
        image: 'selenium/standalone-chrome:latest'
        ports:
          - '4444:4444'
        options: '--shm-size 2g'
    steps:
      - name: Checkout code
        uses: actions/checkout@v3
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: '17'
      - name: Build with Maven
        run: mvn clean compile
      - name: Run Selenium Tests
        id: test
        env: null
        SELENIUM_URL: 'http://localhost:4444/wd/hub'
        run: mvn test -Dselenium.server.url=$SELENIUM_URL
      - name: Send Email
        uses: hilarion5/send-mail@v1
        with:
          smtp-server: smtp.gmail.com
          smtp-port: 587
          smtp-secure: true
          from-email: regression.testing08@gmail.com
          to-email: 'heba.emam@vodafone.com.eg,heba.emam@vodafone.com'
          username: regression.testing08@gmail.com
          password: Reg@4321
          subject: Test Email
          body: This is a test email sent from GitHub Actions.
